import{d as b,r as w,i as y,b as p,E as t,n as E,m as N,w as d,j as v,o as B,a as l,f as n,t as C,h as U,e as h}from"./index-2481af03.js";import{E as I,a as T}from"./form-item-33a802d7.js";import{E as i}from"./index-dd477983.js";import"./_initCloneObject-8f27a167.js";import"./index-1f4bb2e0.js";const M=b({__name:"User",setup(k){const o=w({id:"",userName:"",loginName:"",password:"",age:"",sex:"",phone:""}),u=y(!0),f=()=>{u.value=!u.value},g=localStorage.getItem("user");p.get("/user/"+g).then(m=>{m.data,Object.assign(o,m.data[0])}).catch(m=>{t.error("后台未连接！"),console.log(m)});const _=E(o),V=()=>{i.prompt("请输入旧密码","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",customClass:"custom-message-box"}).then(({value:m})=>{p.post("/login",{loginName:o.loginName,password:m}).then(e=>{e.data===200&&(t.success("密码正确！"),i.prompt("请输入新密码","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",customClass:"custom-message-box"}).then(({value:s})=>{p.post("/user/change/"+o.loginName+"/"+s).then(r=>{r.data===200?t.success("更改成功！"):t.error("更改失败！")}).catch(r=>{t.error("后台未连接！")})}).catch(()=>{t({type:"info",message:"Input canceled"})})),e.data===400&&t.error("密码错误！")}).catch(e=>{t.error("后台未连接！"),console.log(e)})}).catch(()=>{t({type:"info",message:"Input canceled"})})};return(m,e)=>{const s=U,r=T,c=h,x=I;return B(),N(x,{model:v(_),"label-width":"120px"},{default:d(()=>[l(r,{label:""},{default:d(()=>[n(" id"),l(s,{class:"w-30 m-2",modelValue:o.id,"onUpdate:modelValue":e[0]||(e[0]=a=>o.id=a),disabled:""},null,8,["modelValue"]),n(" 姓名"),l(s,{class:"w-50 m-2",modelValue:o.userName,"onUpdate:modelValue":e[1]||(e[1]=a=>o.userName=a),disabled:""},null,8,["modelValue"]),n(" 性别"),l(s,{class:"w-30 m-2",modelValue:o.sex,"onUpdate:modelValue":e[2]||(e[2]=a=>o.sex=a),disabled:""},null,8,["modelValue"]),n(" 年龄"),l(s,{class:"w-30 m-2",modelValue:o.age,"onUpdate:modelValue":e[3]||(e[3]=a=>o.age=a),disabled:""},null,8,["modelValue"]),n(" 联系电话"),l(s,{class:"w-50 m-2",modelValue:o.phone,"onUpdate:modelValue":e[4]||(e[4]=a=>o.phone=a),disabled:""},null,8,["modelValue"])]),_:1}),l(r,{label:""},{default:d(()=>[n(" 密码"),l(s,{type:u.value?"password":"text",class:"w-50 m-2",modelValue:o.password,"onUpdate:modelValue":e[5]||(e[5]=a=>o.password=a),disabled:""},null,8,["type","modelValue"]),l(c,{type:"primary",onClick:f},{default:d(()=>[n(C(u.value?"显示":"隐藏"),1)]),_:1}),l(c,{type:"primary",onClick:V},{default:d(()=>[n("更改密码")]),_:1})]),_:1})]),_:1},8,["model"])}}});export{M as default};
